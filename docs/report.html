<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Full Research Report - System Prompt Forensics</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Fira+Code:wght@400;500&display=swap');
        body { font-family: 'Inter', sans-serif; }
        code { font-family: 'Fira Code', monospace; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 leading-relaxed">
    <nav class="bg-slate-900 text-white py-3 px-6 sticky top-0 z-50 shadow-md">
        <div class="max-w-5xl mx-auto flex justify-between items-center">
            <a href="https://github.com/rmax-ai/system-prompts-forensics/" class="flex items-center gap-2 hover:text-indigo-300 transition-colors">
                <svg class="h-6 w-6 fill-current" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
                <span class="font-bold tracking-tight">System Prompt Forensics</span>
            </a>
            <div class="flex gap-6 text-sm font-medium items-center">
                <a href="index.html" class="hover:text-indigo-300 transition-colors">Summary</a>
                <a href="paper.html" class="hover:text-indigo-300 transition-colors">Paper</a>
                <a href="report.html" class="hover:text-indigo-300 transition-colors">Report</a>
                <a href="appendix.html" class="hover:text-indigo-300 transition-colors">Appendix</a>
                <a href="briefs.html" class="hover:text-indigo-300 transition-colors">Briefs</a>
                <a href="https://github.com/rmax-ai/system-prompts-forensics/" class="hover:text-indigo-300 transition-colors" title="GitHub Repository">
                    <svg class="h-5 w-5 fill-current" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
                </a>
            </div>
        </div>
    </nav>
    <div class="max-w-4xl mx-auto px-6 py-12 lg:py-24">
        <header class="mb-16 border-b border-slate-200 pb-8">
            <nav class="mb-8">
                <a href="index.html" class="text-indigo-600 hover:text-indigo-800 font-medium flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                    </svg>
                    Back to Summary
                </a>
            </nav>
            <h1 class="text-4xl font-bold tracking-tight text-slate-900 mb-4">System Prompt Forensics: Governance Structures in AI Developer Assistants</h1>
            <p class="text-xl text-slate-600 italic">Full Research Report</p>
        </header>

        <main class="space-y-16">
            <!-- Table of Contents -->
            <section class="bg-slate-50 p-6 rounded-lg border border-slate-200">
                <h2 class="text-lg font-bold mb-4 text-slate-800">Table of Contents</h2>
                <nav class="grid grid-cols-1 md:grid-cols-2 gap-2 text-sm">
                    <a href="#context" class="text-indigo-600 hover:underline">1. Research Context and Objectives</a>
                    <a href="#methodology" class="text-indigo-600 hover:underline">2. Methodology Overview</a>
                    <a href="#assistants" class="text-indigo-600 hover:underline">3. Assistants Under Study</a>
                    <a href="#comparative" class="text-indigo-600 hover:underline">4. Comparative Governance Analysis</a>
                    <a href="#patterns" class="text-indigo-600 hover:underline">5. Cross-Assistant Design Patterns</a>
                    <a href="#pgps" class="text-indigo-600 hover:underline">6. Prompt Governance Primitives (PGPs)</a>
                    <a href="#risks" class="text-indigo-600 hover:underline">7. Risk Models and Mitigations</a>
                    <a href="#implications" class="text-indigo-600 hover:underline">8. Implications</a>
                    <a href="#limitations" class="text-indigo-600 hover:underline">9. Limitations</a>
                    <a href="#conclusion" class="text-indigo-600 hover:underline">10. Conclusion</a>
                </nav>
            </section>

            <!-- 1. Research Context and Objectives -->
            <section id="context">
                <h2 class="text-2xl font-semibold mb-6 text-slate-800 border-l-4 border-indigo-500 pl-4">1. Research Context and Objectives</h2>
                <div class="prose prose-slate max-w-none">
                    <p>This study examines system prompts used by AI-assisted developer tools to characterize how they encode authority, constraints, and behavior. The goal is architectural: to treat system prompts as governance layers—implicit agent constitutions—that specify identity, permissible actions, visibility into context, tool use, correction loops, and stopping rules. By normalizing and comparing prompts across IDE and CLI assistants, the study aims to extract recurring prompt-level governance primitives and to identify architectural classes (e.g., suggestion engines, command executors, workspace agents, constitutional stewards) that can inform the design of robust, agent-first systems.</p>
                    <p>System prompts are treated as governance artifacts because they function less as task instructions and more as binding constitutional constraints. They allocate decision rights (user vs policy vs model), define the action surface (tools and side effects), and encode risk controls (refusals, approvals, evidentiary standards, and termination triggers).</p>
                </div>
            </section>

            <!-- 2. Methodology Overview -->
            <section id="methodology">
                <h2 class="text-2xl font-semibold mb-6 text-slate-800 border-l-4 border-indigo-500 pl-4">2. Methodology Overview</h2>
                <div class="prose prose-slate max-w-none">
                    <p>This report synthesizes validated per-assistant analyses derived from a normalized system-prompt schema. Each assistant’s modes are treated as internal constitutional variants and are aggregated into a single regime description. Cross-assistant comparison is performed structurally along invariant dimensions: authority boundaries, scope and visibility, tool mediation, and correction and termination logic.</p>
                    <p><strong>Use of AI Assistance:</strong> This research was produced with AI assistance: GPT-5.2 for data analysis and synthesis, ChatGPT for ideation and prompt refinement, ChatGPT Deep Research for citations, and Gemini 3 Flash (via GitHub Copilot extension in VS Code) for final edits. The author's primary contribution is the development of the AI-driven research methodology and data capture; the author does not claim analytical judgments or conclusions.</p>
                </div>
            </section>

            <!-- 3. Assistants Under Study -->
            <section id="assistants" class="bg-white p-8 rounded-xl shadow-sm border border-slate-100">
                <h2 class="text-2xl font-semibold mb-6 text-slate-800">3. Assistants Under Study</h2>
                <div class="grid grid-cols-1 gap-6">
                    <div class="p-4 bg-slate-50 rounded-lg border border-slate-200">
                        <h3 class="font-bold text-indigo-700 mb-2">codex (exec, review)</h3>
                        <p class="text-sm text-slate-600">A local software engineering agent with a split constitution: an execution-capable operator mode and a schema-bound reviewer mode emphasizing evidentiary discipline.</p>
                    </div>
                    <div class="p-4 bg-slate-50 rounded-lg border border-slate-200">
                        <h3 class="font-bold text-indigo-700 mb-2">GitHub Copilot CLI / copilot (interactive, prompt)</h3>
                        <p class="text-sm text-slate-600">A terminal assistant for software engineering with strong confidentiality and safety prohibitions, tool-mediated action, and mode-level variation primarily in state retention and procedural tool rules.</p>
                    </div>
                    <div class="p-4 bg-slate-50 rounded-lg border border-slate-200">
                        <h3 class="font-bold text-indigo-700 mb-2">opencode (build, plan)</h3>
                        <p class="text-sm text-slate-600">A CLI-oriented engineering assistant with a two-phase governance split: read-only planning versus execution, plus categorical refusal for malware-related assistance.</p>
                    </div>
                    <div class="p-4 bg-slate-50 rounded-lg border border-slate-200">
                        <h3 class="font-bold text-indigo-700 mb-2">vscode-codex (agent-full-access, agent, chat)</h3>
                        <p class="text-sm text-slate-600">A local coding agent with mode-tiered authority based on sandboxing, approvals, filesystem/network scope, and escalation availability.</p>
                    </div>
                    <div class="p-4 bg-slate-50 rounded-lg border border-slate-200">
                        <h3 class="font-bold text-indigo-700 mb-2">vscode-copilot (agent, ask, plan)</h3>
                        <p class="text-sm text-slate-600">An IDE assistant with policy primacy, fixed identity disclosures, strict non-leakage rules, and mode-tiered autonomy including a procedurally gated planning workflow.</p>
                    </div>
                </div>
            </section>

            <!-- 4. Comparative Governance Analysis -->
            <section id="comparative">
                <h2 class="text-2xl font-semibold mb-8 text-slate-800 border-l-4 border-indigo-500 pl-4">4. Comparative Governance Analysis</h2>

                <div class="space-y-12">
                    <div>
                        <h3 class="text-xl font-bold mb-4 text-slate-700">4.1 Authority Models</h3>
                        <div class="prose prose-slate max-w-none">
                            <p>Across assistants, authority is not monolithic. It is partitioned by mode and mediated by explicit decision hierarchies.</p>
                            <ul class="list-disc pl-5 space-y-2">
                                <li><strong>Policy-supremacy regimes:</strong> <code>vscode-copilot</code> and <code>copilot CLI</code> explicitly elevate policy as the final decision-maker, creating a hard ceiling over user intent.</li>
                                <li><strong>User-consent and escalation regimes:</strong> <code>vscode-codex agent/chat</code> encode consent through approval-gated escalation, with the user as final decision-maker for escalated actions.</li>
                                <li><strong>Agent-final regimes (bounded autonomy):</strong> <code>vscode-codex agent-full-access</code> removes escalation and places final decision authority with the model, trading consent gates for internal termination controls.</li>
                                <li><strong>Role-narrowing regimes:</strong> <code>codex review</code> narrows permissible outputs and judgments (commit-introduced bugs only) and forbids producing fixes despite tool availability.</li>
                            </ul>
                        </div>
                    </div>

                    <div>
                        <h3 class="text-xl font-bold mb-4 text-slate-700">4.2 Scope and Visibility</h3>
                        <div class="prose prose-slate max-w-none">
                            <p>Visibility is consistently used as a control mechanism that shapes what the assistant can legitimately claim and do.</p>
                            <ul class="list-disc pl-5 space-y-2">
                                <li><strong>State minimization as governance:</strong> <code>codex</code> and <code>vscode-codex</code> are explicitly non-persistent, limiting long-horizon autonomy.</li>
                                <li><strong>State retention as a mode-level risk lever:</strong> <code>copilot CLI</code> differentiates modes primarily via memory (interactive vs prompt).</li>
                                <li><strong>Environment disclosure:</strong> <code>vscode-codex</code> modes explicitly surface sandbox mode, network access, and writable roots.</li>
                                <li><strong>External governance overlays:</strong> <code>opencode plan</code> and <code>vscode-copilot ask/plan</code> reference repository-local governance (e.g., AGENTS-style rules).</li>
                            </ul>
                        </div>
                    </div>

                    <div>
                        <h3 class="text-xl font-bold mb-4 text-slate-700">4.3 Tool Mediation and Control</h3>
                        <div class="prose prose-slate max-w-none">
                            <p>Tooling is the primary enforcement surface across assistants, but constitutions differ in how tools are exposed, gated, and sequenced.</p>
                            <ul class="list-disc pl-5 space-y-2">
                                <li><strong>Tools as the boundary of action:</strong> All assistants route meaningful side effects through declared tools (shell, file read/write/edit, search, tasks).</li>
                                <li><strong>Procedural tool obligations:</strong> <code>vscode-copilot plan</code> mandates a staged workflow: call a research subagent, then prohibit further tool calls.</li>
                                <li><strong>Side-effect gating by mode:</strong> <code>opencode plan</code> and <code>vscode-copilot plan</code> are explicitly read-only/planning-only.</li>
                                <li><strong>Capability-permission separation:</strong> <code>codex review</code> retains tool availability but forbids producing fixes.</li>
                            </ul>
                        </div>
                    </div>

                    <div>
                        <h3 class="text-xl font-bold mb-4 text-slate-700">4.4 Correction and Termination</h3>
                        <div class="prose prose-slate max-w-none">
                            <p>Correction loops and stopping rules are central constitutional elements, often serving as compensating controls when authority is broad.</p>
                            <ul class="list-disc pl-5 space-y-2">
                                <li><strong>Self-review as internal compliance:</strong> All assistants encode self-checking behaviors (validate changes, reflect on tool output).</li>
                                <li><strong>Stop-and-ask triggers:</strong> <code>codex exec</code> and <code>vscode-codex</code> include explicit "unexpected changes" detection leading to a hard stop.</li>
                                <li><strong>Approval/blocked-state termination:</strong> <code>codex exec</code> and <code>vscode-codex agent/chat</code> terminate or pause when blocked by approvals.</li>
                                <li><strong>Formal output termination contracts:</strong> <code>codex review</code> terminates by producing schema-conforming JSON with required fields.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 5. Cross-Assistant Design Patterns -->
            <section id="patterns">
                <h2 class="text-2xl font-semibold mb-6 text-slate-800 border-l-4 border-indigo-500 pl-4">5. Cross-Assistant Design Patterns</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="p-6 bg-slate-100 rounded-lg">
                        <h3 class="font-bold mb-2 text-slate-800">Recurring Patterns</h3>
                        <ul class="text-sm text-slate-600 list-disc pl-4 space-y-1">
                            <li>Mode as constitution (tiered autonomy)</li>
                            <li>Tool-mediated accountability</li>
                            <li>Separation of capability from permission</li>
                            <li>State minimization as risk control</li>
                            <li>Conservative change doctrine</li>
                        </ul>
                    </div>
                    <div class="p-6 bg-slate-100 rounded-lg">
                        <h3 class="font-bold mb-2 text-slate-800">Notable Divergences</h3>
                        <ul class="text-sm text-slate-600 list-disc pl-4 space-y-1">
                            <li>Fixed identity and refusal strings (vscode-copilot)</li>
                            <li>Mandatory subagent sequencing (vscode-copilot plan)</li>
                            <li>Removal of escalation in full-access modes (vscode-codex)</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- 6. Prompt Governance Primitives (PGPs) -->
            <section id="pgps">
                <h2 class="text-2xl font-semibold mb-6 text-slate-800 border-l-4 border-indigo-500 pl-4">6. Prompt Governance Primitives (PGPs)</h2>
                <div class="prose prose-slate max-w-none">
                    <p>A key output of this research is the identification of <strong>Prompt Governance Primitives (PGPs)</strong>—modular, recurring control structures encoded directly into system prompts. These primitives serve as the building blocks for agent governance, allowing architects to compose predictable behavior regimes without re-deriving patterns from scratch.</p>
                    <p>We categorize these into two levels:</p>
                    <ul class="list-disc pl-5 space-y-2">
                        <li><strong>Abstract Primitives:</strong> Cross-artifact structural patterns such as <em>Approval-gated execution (PGP-001)</em>, <em>Read-before-edit enforcement (PGP-012)</em>, and <em>Instruction confidentiality (PGP-014)</em>.</li>
                        <li><strong>Concrete Primitives:</strong> Specific implementations tied to an assistant's unique requirements, such as <em>Malware refusal (PGP-015)</em> or <em>Strict JSON output contracts (PGP-016)</em>.</li>
                    </ul>
                    <p class="mt-4">For a complete catalog of all identified primitives, including their risk mitigations and observed occurrences, see the <a href="appendix.html" class="text-indigo-600 hover:underline font-semibold">Full PGP Appendix</a>.</p>
                </div>
            </section>

            <!-- 7. Risk Models and Mitigations -->
            <section id="risks">
                <h2 class="text-2xl font-semibold mb-6 text-slate-800 border-l-4 border-indigo-500 pl-4">7. Risk Models and Mitigations</h2>
                <div class="prose prose-slate max-w-none">
                    <p>Assistants encode risk primarily through structural constraints rather than broad admonitions.</p>
                    <ul class="list-disc pl-5 space-y-2">
                        <li><strong>Safety and misuse risk:</strong> Categorical refusal for malware assistance (opencode) and fixed refusals for harmful categories (vscode-copilot).</li>
                        <li><strong>Overreach:</strong> Destructive-action restraint and "unexpected changes" stop rules.</li>
                        <li><strong>Instruction leakage:</strong> Explicit prohibitions on disclosing system instructions.</li>
                        <li><strong>Hallucination:</strong> Mandatory documentation/web retrieval for product-capability questions.</li>
                    </ul>
                </div>
            </section>

            <!-- 8. Implications -->
            <section id="implications">
                <h2 class="text-2xl font-semibold mb-6 text-slate-800 border-l-4 border-indigo-500 pl-4">8. Implications</h2>
                <div class="prose prose-slate max-w-none">
                    <p>For developers building agentic systems, prompt-level governance can be engineered as a layered constitution. Strong safety does not require removing tools; it can be achieved by separating permission from capability and by embedding stop-and-ask triggers for high-risk state changes.</p>
                </div>
            </section>

            <!-- 9. Limitations -->
            <section id="limitations">
                <h2 class="text-2xl font-semibold mb-6 text-slate-800 border-l-4 border-indigo-500 pl-4">9. Limitations</h2>
                <div class="prose prose-slate max-w-none text-slate-600 italic">
                    <p>Prompt-level analysis cannot establish runtime enforcement fidelity. Several regimes reference external policy documents or repository-local governance whose content is not fully observable here. Additionally, some controls are specified as rules without revealing detection mechanisms.</p>
                </div>
            </section>

            <!-- 10. Conclusion -->
            <section id="conclusion" class="bg-indigo-900 text-white p-8 rounded-xl shadow-lg">
                <h2 class="text-2xl font-semibold mb-6">10. Conclusion</h2>
                <p class="text-indigo-100">
                    Across IDE and CLI assistants, system prompts function as constitutional governance documents that allocate authority, bound scope, mediate action through tools, and define correction and termination logic. This study demonstrates that system prompts are a practical governance layer: they encode enforceable constitutional patterns that shape agent behavior independently of task content.
                </p>
            </section>
        </main>

        <footer class="mt-24 pt-8 border-t border-slate-200 text-center text-slate-500 text-sm">
            <p>Author: R. Max Espinoza | <a href="https://github.com/rmax-ai/system-prompts-forensics/" class="text-indigo-600 hover:underline">GitHub Repository</a></p>
            <p class="mt-2">Produced with AI assistance (GPT-5.2). See <a href="index.html#disclosure" class="text-indigo-600 hover:underline">Disclosure</a> for details.</p>
            <p class="mt-4">&copy; 2026 R. Max Espinoza. Content licensed CC BY 4.0. Code licensed MIT.</p>
            <p class="mt-2"><a href="paper.html" class="text-indigo-600 hover:underline">Research Paper</a> | <a href="report.html" class="text-indigo-600 hover:underline">Technical Report</a> | <a href="appendix.html" class="text-indigo-600 hover:underline">Appendix</a> | <a href="briefs.html" class="text-indigo-600 hover:underline">Briefs</a></p>
        </footer>
    </div>
</body>
</html>
